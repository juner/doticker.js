/*
 * doticker.min.js v0.9.2
 *
 * Copyright (c) 2011 tokkonoPapa http://tokkono.cute.coocan.jp/blog/slow/
 *
 * doticker.min.js is freely distributable under the terms of an MIT-style license.
 * For details, see http://www.opensource.org/licenses/MIT
 */
(function(c){c.fn.doticker=function(j){var h=this,a=c.extend({loop:true,maxCodes:10,interval:6E3,scrollbar:false,duration:"slow",width:"auto",height:"300px",background:"#9bc6f2",bodyground:"#fff",bordercolor:"#888",url_user:"http://api.jsdo.it/v0.2/user/show.json",url_list:"http://api.jsdo.it/v0.2/user/codes.json",url_code:"http://api.jsdo.it/v0.2/code/show.json",url_logo:"http://jsdo.it/img/common/sitename_03.png",name:""},j);clearTimeout(a.timer);h.empty();var k=function(){var b='.doticker-wrap {float:left;width:[width];margin:0 auto;padding:0;border-radius:5px;background:[background];font-family:"lucida grande",lucida,tahoma,helvetica,arial,sans-serif!important}.doticker-wrap * {margin:0!important;padding:0!important}.doticker-wrap img {float:left;border:none}#[id]head,#[id]foot {min-height:32px!important;padding:10px!important;overflow:hidden;position:relative}#[id]head {font-size:14px!important;line-height:1.4!important}#[id]head img {width:32px!important;height:32px!important}#[id]head div {margin-top:-4px!important;margin-left:40px!important}#[id]head p {margin-right:4px!important;font-size:12px!important;background:[background]}#[id]body {clear:both;height:[height];margin:0 1px!important;font-size:12px;overflow:[scrollbar];border-radius:5px;background:[bodyground]}.[id]doc {clear:both;padding:8px!important;background:[bodyground];border-bottom:1px dotted [bordercolor]}.[id]doc img {width:50px!important;height:50px!important}.[id]doc div {margin-left:58px!important}.[id]doc h5 {font-size:100%;font-weight:normal}.[id]doc p {margin-top:4px!important;font-size:12px!important}#[id]foot {font-size:12px!important;line-height:1.2!important;padding-bottom:6px!important}#[id]foot img {width:79px;height:39px;margin-top:-3px!important}#[id]foot p {top:50%;margin-left:90px!important;margin-right:8px!important}';
a.id=h.attr("id")+"-dt-";a.scrollbar=a.scrollbar===true?"auto":"hidden";c.each("id width height scrollbar background bodyground bordercolor".split(" "),function(f,c){b=b.replace(RegExp("\\["+c+"\\]","img"),a[c])});var f=document.createElement("style");f.type="text/css";f.styleSheet?f.styleSheet.cssText=b:f.innerHTML=b;document.getElementsByTagName("head")[0].appendChild(f)},l=function(){var b=a.id;h.append('<div class="doticker-wrap"><div id="'+b+'head"></div><div id="'+b+'body"></div><div id="'+
b+'foot"><a href="http://jsdo.it/"><img src="'+a.url_logo+'" title="jsdo.it" /></a><p><a href="http://jsdo.it/">Share JavaScript, HTML5 and CSS</a></p></div></div>');a.bottom=c("#"+b+"foot").offset().top;a.body=c("#"+b+"body");a.body.pend=a.loop===true?a.body.prepend:a.body.append;c("#"+b+"body").hover(function(){a.body.addClass("doticker-stop")},function(){a.body.removeClass("doticker-stop")})},m=function(b){b.url="http://jsdo.it/"+b.name;c("#"+a.id+"head").append('<a href="'+b.url+'"><img src="'+
b.icon+'" title="profile" /></a><div><h4><a href="'+b.url+'" title="profile" target="_blank">'+b.name+'</a></h4><p><a href="'+b.url+'/codes" title="codes" target="_blank">codes '+b.counts.codes+"</a> / forked "+b.counts.forked+' / <a href="'+b.url+'/favorites" title="favorites" target="_blank">&hearts; '+b.counts.favorited+"</a></p></div>")},i=function(){clearTimeout(a.timer);if(a.body.hasClass("doticker-stop")===false){if(a.current>=a.maxCodes)a.current=0;var b=a.body.pend(a.codes[a.current]).children(":first");
b.height(b.height());b.hide().css({opacity:0}).slideDown(a.duration).animate({opacity:1},a.duration,function(){var b=a.body.children(),e=b.length-1;if(a.loop===true&&a.scrollbar===false)for(;e>=0;e--)if(c(b[e]).offset().top>a.bottom)c(b[e]).remove();else break;else for(;e>=a.maxCodes;e--)c(b[e]).remove()});a.current++}if(a.loop===true||a.current!==a.maxCodes)a.timer=setTimeout(i,a.interval)};(function(){k();l();c.ajaxSetup({dataType:"jsonp",data:{name:a.name},timeout:a.timeout,error:function(b,c){a.body.append('<div class="'+
a.id+'doc">'+c+"</div>")}});c.ajax({url:a.url_user,success:function(b){m(b);c.ajax({url:a.url_list,success:function(b){a.codes=[];var c=0;if(b.results!==void 0){var c=b.results.length<a.maxCodes?b.results.length:a.maxCodes,g;for(g=0;g<c;g++){var d=b.results[g];a.codes[g]='<div><div class="'+a.id+'doc"><a href="'+d.url+'" target="_blank"><img src="'+d.thumbnail["100"]+'" title="'+d.title+'" /></a><div><h5><a href="'+d.url+'" target="_blank">'+d.title+"</a></h5><p>Last modified "+d.modified_date.split(" ")[0]+
"<br />views "+d.statistic.pageview+" / forked "+d.statistic.forked+" / &hearts; "+d.statistic.favorite+"</p></div></div></div>"}}a.current=a.maxCodes=c;a.timer=null;a.timeout=a.interval;if(a.loop!==true)a.interval=a.duration=0;c&&i()}})}})})();return h}})(jQuery);